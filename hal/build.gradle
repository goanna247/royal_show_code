import edu.wpi.first.toolchain.NativePlatforms

apply plugin: 'cpp'
apply plugin: 'edu.wpi.first.GradleRIO'

model {
  components {
    HAL(NativeLibrarySpec) {
      targetPlatform NativePlatforms.desktop
      targetPlatform NativePlatforms.roborio 

      sources {
        sources.cpp {
          source {
            srcDir 'src/main/native/athena'
            include '**/*.cpp', '**/*.cc'
          }

          exportedHeaders {
            srcDir 'src/main/native/include'
          }
        }
      }

      binaries.all {
        if (it.targetPlatform.name == "linuxathena")
          cppCompiler.define "PLATFORM_ROBORIO"
        else
          cppCompiler.define "PLATFORM_DESKTOP"
      }

      wpi.cpp.vendor.cpp(it)
      wpi.cpp.deps.wpilib(it)
    }
  }
}